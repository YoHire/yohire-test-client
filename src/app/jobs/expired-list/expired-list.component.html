<!-- MAIN CONTENT -->
<div class="main-content">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-12">
        <!-- new header starts -->
        <div class="header my-3 xsticky-top" style="background-color: white">
          <div class="header-body border-0">
            <div class="row align-items-center">
              <div class="col col-md-2 col-lg-1">
                <div class="btn-group" role="group" aria-label="...">
                  <button
                    type="button"
                    class="btn btn-white btn-sm pb-1"
                    (click)="pageLocation.back()"
                  >
                    <svg
                      viewBox="0 0 24 24"
                      width="24"
                      height="24"
                      stroke="currentColor"
                      stroke-width="2.5"
                      fill="none"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="css-i6dzq1"
                    >
                      <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                  </button>
                  <button
                    type="button"
                    class="btn btn-white btn-sm pb-1"
                    (click)="pageLocation.forward()"
                  >
                    <svg
                      viewBox="0 0 24 24"
                      width="24"
                      height="24"
                      stroke="currentColor"
                      stroke-width="2.5"
                      fill="none"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="css-i6dzq1"
                    >
                      <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="col px-5">
                <nav aria-label="breadcrumb" class="">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a routerLink="/home/dashboard{{ loginUser }}">Home</a>
                    </li>
                    <li class="breadcrumb-item">
                      <a routerLink="/jobs/recruiter/list">Jobs</a>
                    </li>
                    <li class="breadcrumb-item active"><a>Expired</a></li>
                  </ol>
                </nav>
              </div>
              <!-- <div class="col-auto ">

                                <button type="button" class="btn btn-primary btn-sm" routerLink="/jobs/add">
                                    <svg viewBox="0 0 24 28" width="20" height="20" stroke="currentColor"
                                        stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"
                                        class="css-i6dzq1">
                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                    <span class="mt-2"> Create Job &nbsp;</span>
                                </button>
                            </div> -->
            </div>
          </div>
        </div>
        <!-- new header ends -->
        <!-- Header -->

        <!-- Tab content -->
        <div class="tab-content" id="myTabContent">
          <div
            class="tab-pane fade show active"
            role="tabpanel"
            aria-labelledby="contactsListTab"
          >
            <!-- Card -->
            <div class="card" id="contactsList">
              <div class="card-header">
                <div class="row align-items-center">
                  <div class="col">
                    <form>
                      <div
                        class="input-group input-group-flush input-group-merge input-group-reverse"
                      >
                        <input
                          class="form-control list-search"
                          type="search"
                          placeholder="Search"
                          (keyup)="customFilter($event)"
                        />
                        <span class="input-group-text">
                          <i class="fe fe-search"></i>
                        </span>
                      </div>
                    </form>
                  </div>

                  <div class="col-auto me-n3">
                    <!-- Select -->
                    <select
                      class="form-select form-select-sm form-control-flush"
                      [(ngModel)]="size"
                      (change)="paginateItems()"
                      style="width: 120px"
                    >
                      <option [value]="10">10 per page</option>
                      <option [value]="5">5 per page</option>
                      <option [value]="0">All</option>
                    </select>
                  </div>

                  <div class="col-auto">
                    <!-- Dropdown -->
                    <div class="dropdown">
                      <!-- Toggle -->
                      <button
                        class="btn btn-sm btn-white"
                        type="button"
                        data-bs-toggle="dropdown"
                        data-bs-auto-close="outside"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        <i class="fe fe-sliders me-1"></i> Filter
                        <span class="badge bg-primary ms-1 d-none">0</span>
                      </button>

                      <!-- Menu -->
                      <form
                        class="dropdown-menu dropdown-menu-end dropdown-menu-card"
                      >
                        <div class="card-header">
                          <!-- Title -->
                          <h4 class="card-header-title">Filters</h4>

                          <!-- Link -->
                          <button
                            class="btn btn-sm btn-link text-reset d-none"
                            type="reset"
                          >
                            <small>Clear filters</small>
                          </button>
                        </div>
                        <div class="card-body">
                          <!-- List group -->
                          <div class="list-group list-group-flush mt-n4 mb-4">
                            <div class="list-group-item">
                              <div class="row">
                                <div class="col">Status</div>
                                <div class="col-auto">
                                  <select
                                    class="form-select form-select-sm"
                                    style="width: 150px"
                                    [(ngModel)]="status"
                                    [ngModelOptions]="{ standalone: true }"
                                  >
                                    <option value="all">All</option>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                  </select>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- List group -->
                          <div class="list-group list-group-flush mt-n4 mb-4">
                            <div class="list-group-item">
                              <div class="row">
                                <div class="col">Category</div>
                                <div class="col-auto">
                                  <select
                                    class="form-select form-select-sm"
                                    style="width: 150px"
                                    [(ngModel)]="categoryId"
                                    [ngModelOptions]="{ standalone: true }"
                                  >
                                    <option value="all">All</option>
                                    <option
                                      [value]="item.id"
                                      *ngFor="let item of categories;trackBy: trackByItemId"
                                    >
                                      {{ item.name }}
                                    </option>
                                  </select>
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- Button -->
                          <button
                            class="btn w-100 btn-primary"
                            type="submit"
                            (click)="list()"
                          >
                            Apply Now
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <!-- / .row -->
              </div>

              <div class="table-responsive tab-pane fade show active" id="home">
                <table
                  class="table table-sm table-hover table-nowrap card-table"
                >
                  <thead>
                    <tr>
                      <th class="list-sort text-muted">Sl No.</th>
                      <th></th>
                      <th>
                        <a
                          class="list-sort text-muted"
                          data-sort="item-name"
                          (click)="sortByField('id')"
                          >Job ID</a
                        >
                      </th>
                      <th>
                        <a
                          class="list-sort text-muted"
                          data-sort="item-name"
                          (click)="sortByField('title')"
                          >Title</a
                        >
                      </th>
                      <th>
                        <a
                          class="list-sort text-muted"
                          data-sort="item-name"
                          (click)="sortByField('category.name')"
                        >
                          Category</a
                        >
                      </th>
                      <th>
                        <a
                          class="list-sort text-muted"
                          data-sort="item-name"
                          (click)="sortByField('expiryDate')"
                        >
                          Expiry Date</a
                        >
                      </th>
                      <th>
                        <a
                          class="list-sort text-muted"
                          data-sort="item-name"
                          (click)="sortByField('candidateCount')"
                        >
                          Vacancy Count</a
                        >
                      </th>
                      <!-- <th>
                                                <a class="list-sort text-muted" data-sort="item-name"
                                                    (click)="sortByField('verified')">
                                                    Verification</a>
                                            </th> -->
                      <th></th>
                    </tr>
                  </thead>
                  <tbody class="list fs-base">
                    <tr
                      *ngFor="
                        let item of itemsFiltered
                          | sort : sortedColumn : sortedDirection
                          | slice : pageStartIndex : pageEndIndex;
                        let i = index;
                        trackBy: trackByItemId
                      "
                    >
                      <td routerLink="/jobs/view/{{ item.id }}">{{ i + 1 }}</td>
                      <td>
                        <div class="avatar avatar-xs align-middle me-2">
                          <img
                            [src]="
                              item?.image
                                ? imageUrl + item?.image
                                : 'assets/img/job2.png'
                            "
                            [alt]=""
                            class="avatar-img rounded-circle"
                          />
                        </div>
                      </td>
                      <td routerLink="/jobs/view/{{ item.id }}">
                        #{{ item.id }}
                      </td>
                      <td routerLink="/jobs/view/{{ item.id }}">
                        {{ item.title }}
                      </td>
                      <td routerLink="/jobs/view/{{ item.id }}">
                        {{ item.category.name }}, {{ item.subCategory?.name }}
                      </td>
                      <td routerLink="/jobs/view/{{ item.id }}">
                        {{ item.expiryDate | date : "dd/MM/yyyy" }}
                      </td>
                      <td routerLink="/jobs/view/{{ item.id }}">
                        {{ item.candidateCount }}
                      </td>
                      <!-- <td routerLink="/jobs/view/{{item.id}}">
                                                <span *ngIf="item.verified">Verified</span>
                                                <span *ngIf="!item.verified">Pending</span>
                                            </td> -->
                      <td>
                        <div class="dropdown">
                          <a
                            href="#"
                            class="dropdown-ellipses dropdown-toggle"
                            role="button"
                            data-bs-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false"
                          >
                            <i class="fe fe-more-vertical"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-end">
                            <a
                              class="dropdown-item"
                              routerLink="/jobs/view/{{ item.id }}"
                            >
                              View
                            </a>
                            <a
                              class="dropdown-item"
                              routerLink="/jobs/edit/{{ item.id }}"
                            >
                              Edit
                            </a>
                            <a
                              class="dropdown-item cursor-pointer"
                              *ngIf="item.status == 'ACTIVE'"
                              (click)="statusUpdate(item.id, 'deactivate')"
                            >
                              Disable
                            </a>
                            <a
                              class="dropdown-item cursor-pointer"
                              *ngIf="item.status == 'INACTIVE'"
                              (click)="statusUpdate(item.id, 'activate')"
                            >
                              Enable
                            </a>
                            <a class="dropdown-item" (click)="delete(item.id)">
                              Remove
                            </a>
                            <a
                              class="dropdown-item"
                              routerLink="/jobs/requests/{{ item.id }}/list"
                            >
                              Job Request
                            </a>
                            <!-- <a  class="dropdown-item"
                                                            routerLink="/jobs/requests/list">
                                                            View Candidate
                                                        </a> -->
                          </div>
                        </div>
                      </td>
                    </tr>
                    <tr *ngIf="itemsFiltered.length < 1">
                      <td colspan="7" class="text-center">No Jobs to list</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div
                class="card-footer d-flex justify-content-between"
                *ngIf="pageCount > 0"
              >
                <!-- Pagination (prev) -->
                <ul
                  class="list-pagination-prev pagination pagination-tabs card-pagination"
                  *ngIf="pageCount > 0"
                >
                  <li class="page-item" [ngClass]="{ disabled: page < 1 }">
                    <button
                      class="page-link ps-0 pe-4 border-end"
                      (click)="page = page - 1; paginateItems()"
                      [disabled]="page < 1"
                    >
                      <i class="fe fe-arrow-left me-1"></i> Prev
                    </button>
                  </li>
                </ul>

                <!-- Pagination -->
                <ul
                  class="list-pagination pagination pagination-tabs card-pagination"
                >
                  <li
                    *ngFor="
                      let item of [].constructor(pageCount);
                      let i = index;
                    "
                    [ngClass]="{ active: page == i }"
                  >
                    <button class="page" (click)="page = i; paginateItems()">
                      {{ i + 1 }}
                    </button>
                  </li>
                </ul>

                <!-- Pagination (next) -->
                <ul
                  class="list-pagination-next pagination pagination-tabs card-pagination"
                >
                  <li
                    class="page-item"
                    [ngClass]="{ disabled: page >= pageCount - 1 }"
                  >
                    <button
                      class="page-link ps-4 pe-0 border-start"
                      (click)="page = page + 1; paginateItems()"
                      [disabled]="page >= pageCount - 1"
                    >
                      Next <i class="fe fe-arrow-right ms-1"></i>
                    </button>
                  </li>
                </ul>

                <!-- Alert -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- / .row -->
  </div>
</div>
<!-- / .main-content -->
